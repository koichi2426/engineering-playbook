# 3. コードレビュー (Code Review)

このドキュメントは、コードレビューの目的、プロセス、およびレビューア・作者双方の心構えを定義します。

## 1. レビューの目的 (Goals)

1.  **品質の担保 (Quality):** バグや設計上の問題を早期に発見し、`main` ブランチの健全性を保ちます。
2.  **知識の共有 (Knowledge Sharing):** 変更内容をチームに共有し、属人化を防ぎます。
3.  **コードの一貫性 (Consistency):** この `engineering-playbook` で定義された規約や設計思想が守られているかを確認します。

## 2. レビューアの心構え (Reviewer's Mindset)

### レビューアが確認すべきこと (Checklist)

* **Why (なぜ):** なぜこの変更が必要なのか？ (PRの説明欄で確認)
* **Design (設計):** この実装方法は、既存の設計や `2_Concepts/` の原則と一致しているか？
* **Functionality (機能):** Issueの要件を正しく満たしているか？ エッジケースは考慮されているか？
* **Readability (可読性):** 他の開発者が将来、このコードを容易に理解できるか？ 複雑すぎる箇所はないか？
* **Testing (テスト):** 変更に対する適切なテスト（ユニットテスト、E2Eテストなど）が含まれているか？
* **Consistency (一貫性):** `git_workflow.md` のコミット規約や、他のガイドラインに従っているか？

### レビューコメントの原則

1.  **提案 (Suggestion):** 「ダメ」と否定するのではなく、「こうすればもっと良くなるのでは？」という提案の形でコメントします。（GitHubの `Suggest Changes` 機能を活用してください）
2.  **敬意 (Respect):** コードを書いた作者への敬意を忘れないでください。コードと人格を分離してレビューします。
3.  **賞賛 (Praise):** 良い設計、うまい実装、学びがあった箇所は積極的に賞賛し、チームのモチベーションを高めます。
4.  **明確 (Clarity):** 「なぜ」その修正が必要なのか、理由や背景を（必要ならガイドラインのリンクを添えて）明確に伝えます。

## 3. 作者（PR作成者）の心構え (Author's Mindset)

1.  **セルフレビュー (Self-Review):**
    PRを作成したら、必ず「レビューを依頼する前」に自分自身でセルフレビューを行ってください。`git diff` を確認し、不要なコード（`console.log` など）やtypoがないか最終チェックします。
2.  **明確な説明 (Clear Description):**
    PRの説明欄で、レビューアが「何を」「なぜ」変更したのかを理解できるように、Issue番号や背景を明確に記述します。（これはAI (Copilot) がコードを学習する上でも非常に重要です）
3.  **議論を歓迎する (Be Open):**
    レビューは「批判」ではなく、「コードをより良くするための議論」です。コメントを感謝の意を持って受け入れ、意図がわからない場合は積極的に質問してください。
4.  **議論の反映 (Apply Changes):**
    レビューでの指摘や議論の結果をコードに反映させます。すべてのコメントが解決（`Resolve`）されたら、レビューアに再度レビューを依頼（`Re-request review`）します。